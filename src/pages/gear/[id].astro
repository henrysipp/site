---
import { getCollection, getEntry, render } from 'astro:content';
import SidebarLayout from '../../layouts/SidebarLayout.astro';
import Heading from '../../components/Heading.astro';
import Text from '../../components/Text.astro';

export async function getStaticPaths() {
	const gear = await getCollection('gear');
	return gear.map(item => ({
		params: { id: item.id },
		props: { item },
	}));
}

const { item } = Astro.props;
const { Content } = await render(item);
---

<SidebarLayout title={item.data.title} description={item.data.description}>
	<div class="mb-6">
		<a href="/gear" class="text-sm text-blue-600 dark:text-blue-400 hover:underline">â† Back to Gear</a>
	</div>
	
	<Heading>{item.data.title}</Heading>
	
	<div class="mt-8">
		<img src={item.data.image} alt={item.data.title} class="w-full max-w-2xl rounded-lg shadow-lg" />
	</div>

	<div class="mt-8 prose dark:prose-invert max-w-none">
		<Text class="text-lg text-secondary">{item.data.description}</Text>
		
		<div class="mt-6">
			<Content />
		</div>

		{item.data.link && (
			<div class="mt-8">
				<a 
					href={item.data.link} 
					target="_blank" 
					rel="noopener noreferrer"
					class="inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors"
				>
					Visit Website
					<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
					</svg>
				</a>
			</div>
		)}

		<div class="mt-8 flex gap-2">
			{item.data.tags.map(tag => (
				<span class="px-3 py-1 text-sm bg-gray-100 dark:bg-gray-800 text-secondary rounded-full">
					{tag}
				</span>
			))}
		</div>
	</div>
</SidebarLayout>
